syntax = "proto3";
package radixox;

// L'enveloppe principale pour toutes les requÃªtes client
message NetCommand {
  optional uint32 request_id = 1;
  oneof net_action {
    NetSetRequest set = 2;
    NetGetRequest get = 3;
    NetGetNRequest getn = 4;
    NetDelRequest del = 5;
  }
}

message NetSetRequest {
  bytes key = 1;
  bytes value = 2;
}

message NetGetRequest { bytes key = 1; }
message NetDelRequest { bytes key = 1; }

message NetGetNRequest {
  bytes pattern = 1; // Le pattern avec '*'
}

message NetResponse {
  optional uint32 request_id = 1;
  oneof result {
    NetErrorResponse error = 2;
    NetSuccessResponse success = 3;
  }
}

message NetErrorResponse { string message = 2; }

message NetSuccessResponse {
  oneof body {
    bytes get_val = 1;
    NetGetNval keys_val = 2;
  }
}

message NetGetNval { repeated bytes keys = 1; }